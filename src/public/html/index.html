<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8" />
	<title>SoundClone Track Page</title>
	<link rel="stylesheet" href="../css/index.css" />
	<link rel="stylesheet" href="../css/track.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
	<header class="navbar">
		<div class="logo">üéµ SoundClone</div>
		<nav>
			<ul class="menu">
				<li><a href="home.html">Home</a></li>
				<li><a href="library.html">Library</a></li>
			</ul>
		</nav>
		<div class="search-container">
			<input type="text" placeholder="Search for artists, bands, tracks, podcasts" />
			<button class="search-btn">üîç</button>
		</div>

		<div class="user-buttons" id="authArea">
			<button class="upload-btn" onclick="location.href='upload.html'">Upload</button>
			<button class="more-btn">‚Ä¢‚Ä¢‚Ä¢</button>
			<button class="sign-in-btn" onclick="location.href='login.html?returnTo=index.html'">Sign in</button>
			<button class="create-account-btn" onclick="location.href='signup.html'">Create account</button>
		</div>
	</header>

	<main class="main-content">
		<div class="track-layout">
			<!-- Î©îÏù∏ ÌîåÎ†àÏù¥Ïñ¥ + Ìä∏ÎûôÎ¶¨Ïä§Ìä∏ -->
			<div class="track-main">
				<section class="player-section">
					<div class="player-info">
						<div id="current-track-info">
							<div class="user-name" id="artist-name">Kairikibear</div>
							<div class="track-title" id="track-title">Kairikibear - Darling Dance</div>
						</div>
						<div class="waveform-container">
							<button id="play-pause-btn" aria-label="Play/Pause">
								<span class="icon play">‚ñ∂</span>
								<span class="icon pause">‚è∏</span>
							</button>
							<canvas id="waveform"></canvas>
							<div id="time-display">
								<span id="current-time">0:00</span> /
								<span id="duration-time">0:00</span>
							</div>
						</div>
					</div>
					<div class="album-cover-container">
						<img id="album-cover" src="../assets/albumart.jpg" alt="Ïï®Î≤î Ïª§Î≤Ñ" />
					</div>
				</section>

				<section class="tracklist-section">
					<h2>Í≥° Î™©Î°ù</h2>
					<div id="tracklist"></div>
				</section>
			</div>

			<!-- Ïò§Î•∏Ï™Ω ÏÇ¨Ïù¥ÎìúÎ∞î -->
			<aside class="track-sidebar">
				<div class="sidebar-card">
					<div class="sidebar-title">Track info</div>
					<div>Lilium Records ¬∑ Single</div>
					<div class="sidebar-meta-row">
						<span><strong>3:27</strong> length</span>
						<span><strong>Audio</strong></span>
					</div>
					<div class="sidebar-meta-row">
						<span>Plays: <strong>‚Äî</strong></span>
						<span>Likes: <strong>‚Äî</strong></span>
					</div>
				</div>

				<div class="sidebar-card">
					<div class="sidebar-title">Related tracks</div>
					<div class="sidebar-track">
						<img src="../assets/sample2_album.jpg" alt="related" />
						<div class="sidebar-track-info">
							<div class="name">ÎëêÎ≤àÏß∏ Í≥° ÏòàÏãú</div>
							<div class="artist">artist 2</div>
						</div>
					</div>
				</div>

				<div class="sidebar-card">
					<div class="sidebar-title">Tags</div>
					<div>
						<span class="sidebar-tag">electronic</span>
						<span class="sidebar-tag">vocaloid</span>
						<span class="sidebar-tag">j-pop</span>
					</div>
				</div>
			</aside>
		</div>
	</main>

	<footer class="player-bar">
		<div class="player-bar-section">
			<button id="footer-play-pause-btn" class="bar-btn" aria-label="Play/Pause">
				<span class="icon play">‚ñ∂</span>
				<span class="icon pause">‚è∏</span>
			</button>
			<span id="footer-current-time">0:00</span>
			<input type="range" id="progress-bar" min="0" max="100" value="0" />
			<span id="footer-duration-time">0:00</span>
			<input type="range" id="volume-slider" min="0" max="100" value="80" />
			<span class="volume-icon">üîä</span>
		</div>
	</footer>

	<script>
		function renderAuth() {
			const p = JSON.parse(localStorage.getItem('profile'));
			const area = document.getElementById('authArea');

			const uploadBtnHtml = `<button class="upload-btn" onclick="location.href='upload.html'">Upload</button>`;
			const moreBtnHtml = `<button class="more-btn">‚Ä¢‚Ä¢‚Ä¢</button>`;

			if (p && area) {
				area.innerHTML = `
					${uploadBtnHtml}
					${moreBtnHtml}
					<div style="display:flex;align-items:center;gap:8px;cursor:pointer;">
						<img src="${p.img}" style="width:38px;height:38px;border-radius:50%;object-fit:cover;background:#eee;border:1px solid #bbb;" alt="ÌîÑÎ°úÌïÑ" />
						<span style="font-size:16px;color:#fff;font-weight:bold;">${p.name}</span>
						<button onclick="logout()" style="margin-left:8px;padding:5px 16px;border-radius:5px;background:#444;color:#fff;border:none;cursor:pointer;">Logout</button>
					</div>`;
			} else if (area) {
				area.innerHTML = `
					${uploadBtnHtml}
					${moreBtnHtml}
					<button class="sign-in-btn" onclick="location.href='login.html?returnTo=index.html'">Sign in</button>
					<button class="create-account-btn" onclick="location.href='signup.html'">Create account</button>`;
			}
		}
		function logout() {
			localStorage.removeItem('profile');
			renderAuth();
		}
		renderAuth();
	</script>

	<script src="../js/globalPlayer.js"></script>
	<script src="../js/player.js"></script>
</body>

</html>